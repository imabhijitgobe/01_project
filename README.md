# ğŸš€ git-ai

**AI-powered Git workflow automation CLI** - Simplify your GitHub workflow with intelligent commit messages generated by leading AI providers.

[![TypeScript](https://img.shields.io/badge/TypeScript-5.9-blue.svg)](https://www.typescriptlang.org/)
[![Node.js](https://img.shields.io/badge/Node.js-20+-green.svg)](https://nodejs.org/)
[![License](https://img.shields.io/badge/License-ISC-yellow.svg)](LICENSE)

---

## âœ¨ Features

- ğŸ¤– **AI-Powered Commits** - Generate professional commit messages using Gemini, OpenAI, Anthropic, or GitHub
- ğŸ” **Smart Authentication** - Automatic GitHub CLI installation and authentication flow
- ğŸ“¦ **Repository Management** - List, create, and delete GitHub repositories
- âš¡ **One Command Push** - Stage, commit with AI, and push in a single command
- ğŸ”§ **Easy Configuration** - Interactive setup with secure API key storage

---

## ğŸ“‹ Table of Contents

- [Installation](#-installation)
- [Quick Start](#-quick-start)
- [Commands](#-commands)
- [Configuration](#-configuration)
- [AI Providers](#-ai-providers)
- [Architecture](#-architecture)
- [Development](#-development)
- [Testing](#-testing)
- [Troubleshooting](#-troubleshooting)
- [Contributing](#-contributing)
- [License](#-license)

---

## ğŸ“¦ Installation

### Prerequisites

- **Node.js** 20.x or higher
- **pnpm** (recommended) or npm
- **Windows** (for automatic GitHub CLI installation via winget)

### Install from Source

```bash
# Clone the repository
git clone https://github.com/imabhijitgobe/01_project.git
cd 01_project

# Install dependencies
pnpm install

# Build the project
pnpm build

# Link globally (optional, for using 'git-ai' command anywhere)
cd packages/cli
npm link
```

### Verify Installation

```bash
git-ai --help
```

---

## ğŸš€ Quick Start

### 1. Run your first push

```bash
git-ai push
```

The CLI will automatically:

1. âœ… Check if GitHub CLI is installed (install if missing)
2. âœ… Authenticate with GitHub
3. âœ… Set up your AI provider
4. âœ… Create a GitHub repository (if needed)
5. âœ… Generate an AI commit message
6. âœ… Push to GitHub

### 2. That's it!

Your code is now on GitHub with a professional commit message.

---

## ğŸ“– Commands

### `git-ai push`

The main command - stages all changes, generates an AI commit message, and pushes to GitHub.

```bash
# Full AI-powered flow
git-ai push

# Use a custom commit message (skip AI)
git-ai push -m "feat: add new feature"
```

**Flow:**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Check GitHub   â”‚
â”‚      CLI        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Authenticate   â”‚
â”‚    GitHub       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Check/Setup    â”‚
â”‚  AI Provider    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Check/Create   â”‚
â”‚   Repository    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Stage Changes  â”‚
â”‚   git add .     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Generate AI    â”‚
â”‚ Commit Message  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Commit & Push  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### `git-ai setup`

Initial setup wizard for first-time users.

```bash
git-ai setup
```

**Steps:**

1. Checks GitHub CLI installation
2. Authenticates with GitHub
3. Configures AI provider
4. Saves API key securely

---

### `git-ai config`

Change your AI provider or update your API key.

```bash
git-ai config
```

---

### `git-ai repos`

List and manage your GitHub repositories.

```bash
# List your repositories (default: 10)
git-ai repos

# List more repositories
git-ai repos -n 25
git-ai repos --limit 50

# Delete a repository by name
git-ai repos --delete my-repo
git-ai repos -d username/repo-name
```

**Output Example:**

```
ğŸ“‚ Your GitHub Repositories (showing 10):

1. my-project [public] - Updated: 16/1/2026
2. another-repo [private] - Updated: 15/1/2026
3. cool-app [public] - Updated: 14/1/2026
...
```

---

### `git-ai delete`

Delete the current project's GitHub repository.

```bash
# With confirmation prompt
git-ai delete

# Skip confirmation (use with caution!)
git-ai delete -y
git-ai delete --yes
```

âš ï¸ **Warning:** This action is irreversible. The repository will be permanently deleted from GitHub.

---

### `git-ai logout`

Clear your stored API key and optionally logout from GitHub CLI.

```bash
# Clear API key only
git-ai logout

# Clear API key and logout from GitHub CLI
git-ai logout -a
git-ai logout --all
```

This command securely removes your stored API key from the local configuration file.

---

## âš™ï¸ Configuration

Configuration is stored locally at `~/.my-cli/config.json`

### Config Structure

```json
{
  "aiProvider": "gemini",
  "apiKey": "your-api-key-here",
  "setupComplete": true
}
```

### Config Location

| OS      | Path                                      |
| ------- | ----------------------------------------- |
| Windows | `C:\Users\<username>\.my-cli\config.json` |
| macOS   | `/Users/<username>/.my-cli/config.json`   |
| Linux   | `/home/<username>/.my-cli/config.json`    |

---

## ğŸ¤– AI Providers

git-ai supports multiple AI providers for generating commit messages:

| Provider      | Model            | Get API Key                                                      |
| ------------- | ---------------- | ---------------------------------------------------------------- |
| **Gemini**    | gemini-2.0-flash | [Google AI Studio](https://aistudio.google.com/app/apikey)       |
| **OpenAI**    | gpt-4o-mini      | [OpenAI Platform](https://platform.openai.com/api-keys)          |
| **Anthropic** | claude-3-haiku   | [Anthropic Console](https://console.anthropic.com/settings/keys) |
| **GitHub**    | gpt-4o-mini      | [GitHub Tokens](https://github.com/settings/tokens)              |

### Commit Message Generation

The AI generates commit messages following conventional commit standards:

```
<type>: <description>

Examples:
- feat: add user authentication flow
- fix: resolve null pointer exception in parser
- docs: update README with installation instructions
- refactor: extract validation logic to separate module
```

---

## ğŸ—ï¸ Architecture

### Project Structure

```
01_project/
â”œâ”€â”€ packages/
â”‚   â””â”€â”€ cli/
â”‚       â”œâ”€â”€ src/
â”‚       â”‚   â”œâ”€â”€ index.ts           # CLI entry point & commands
â”‚       â”‚   â””â”€â”€ lib/
â”‚       â”‚       â”œâ”€â”€ ai.ts          # AI provider integrations
â”‚       â”‚       â”œâ”€â”€ config.ts      # Configuration management
â”‚       â”‚       â”œâ”€â”€ git.ts         # Git & GitHub CLI utilities
â”‚       â”‚       â”œâ”€â”€ prompt.ts      # Interactive prompts
â”‚       â”‚       â”œâ”€â”€ ai.test.ts     # AI module tests
â”‚       â”‚       â”œâ”€â”€ config.test.ts # Config module tests
â”‚       â”‚       â””â”€â”€ git.test.ts    # Git module tests
â”‚       â”œâ”€â”€ dist/                  # Compiled JavaScript
â”‚       â”œâ”€â”€ package.json
â”‚       â”œâ”€â”€ tsconfig.json
â”‚       â””â”€â”€ vitest.config.ts
â”œâ”€â”€ package.json                   # Workspace root
â”œâ”€â”€ pnpm-workspace.yaml
â”œâ”€â”€ tsconfig.json                  # Base TypeScript config
â””â”€â”€ README.md
```

### Tech Stack

| Technology       | Purpose                 |
| ---------------- | ----------------------- |
| **TypeScript**   | Type-safe development   |
| **Commander.js** | CLI framework           |
| **Inquirer**     | Interactive prompts     |
| **Axios**        | HTTP client for AI APIs |
| **Execa**        | Shell command execution |
| **Chalk**        | Terminal styling        |
| **Vitest**       | Testing framework       |
| **pnpm**         | Package management      |

### Module Overview

#### `index.ts` - CLI Commands

Defines all CLI commands using Commander.js:

- `push` - Main workflow command
- `setup` - Initial setup wizard
- `config` - Configuration management
- `repos` - Repository listing
- `delete` - Repository deletion

#### `lib/ai.ts` - AI Integration

Handles communication with AI providers:

- Gemini (Google)
- OpenAI
- Anthropic (Claude)
- GitHub Models

#### `lib/config.ts` - Configuration

Manages persistent configuration:

- Read/write config file
- API key storage
- Provider settings

#### `lib/git.ts` - Git Operations

Wraps Git and GitHub CLI commands:

- Repository detection
- Staging changes
- Commit and push
- Remote management

#### `lib/prompt.ts` - User Interaction

Interactive prompts using Inquirer:

- Provider selection
- API key input
- Confirmations

---

## ğŸ› ï¸ Development

### Setup Development Environment

```bash
# Clone and install
git clone https://github.com/imabhijitgobe/01_project.git
cd 01_project
pnpm install

# Build
pnpm build

# Watch mode (auto-rebuild on changes)
cd packages/cli
pnpm dev
```

### Available Scripts

| Script               | Description                         |
| -------------------- | ----------------------------------- |
| `pnpm build`         | Build all packages                  |
| `pnpm test`          | Run all tests                       |
| `pnpm lint`          | Run ESLint                          |
| `pnpm cli <command>` | Run CLI commands during development |

### Making Changes

1. Edit source files in `packages/cli/src/`
2. Build with `pnpm build`
3. Test with `pnpm test`
4. Link globally with `npm link` to test commands

---

## ğŸ§ª Testing

Tests are written using Vitest and cover all core modules.

### Run Tests

```bash
# Run all tests once
pnpm test

# Watch mode (re-run on file changes)
cd packages/cli
pnpm test:watch
```

### Test Coverage

| Module      | Tests  | Coverage                         |
| ----------- | ------ | -------------------------------- |
| `config.ts` | 3      | Types, interfaces                |
| `ai.ts`     | 12     | Endpoints, parsing, errors       |
| `git.ts`    | 19     | Commands, URL parsing, detection |
| **Total**   | **34** | Core functionality               |

### Test Structure

```typescript
describe('Module', () => {
  describe('Feature', () => {
    it('should do something', () => {
      expect(result).toBe(expected);
    });
  });
});
```

---

## ğŸ”§ Troubleshooting

### Common Issues

#### "GitHub CLI is not installed"

The CLI will offer to install it automatically. Select "Yes" when prompted, or install manually:

```bash
# Windows
winget install GitHub.cli

# macOS
brew install gh

# Linux
sudo apt install gh
```

#### "Not authenticated with GitHub"

Run the push command again - it will trigger the authentication flow:

```bash
git-ai push
```

#### "Invalid API key"

Reconfigure your AI provider:

```bash
git-ai config
```

#### "Rate limit exceeded"

Wait a few minutes and try again, or use a custom commit message:

```bash
git-ai push -m "your commit message"
```

#### "Host key verification failed"

The remote URL might be using SSH. git-ai will automatically switch to HTTPS.

---

## ğŸ¤ Contributing

Contributions are welcome! Here's how to get started:

1. Fork the repository
2. Create a feature branch: `git checkout -b feature/amazing-feature`
3. Make your changes
4. Run tests: `pnpm test`
5. Commit your changes: `git-ai push -m "feat: add amazing feature"`
6. Push to your fork: `git push origin feature/amazing-feature`
7. Open a Pull Request

---

## ğŸ“„ License

This project is licensed under the ISC License - see the [LICENSE](LICENSE) file for details.

---

## ğŸ™ Acknowledgments

- [Commander.js](https://github.com/tj/commander.js/) - CLI framework
- [Inquirer.js](https://github.com/SBoudrias/Inquirer.js) - Interactive prompts
- [GitHub CLI](https://cli.github.com/) - GitHub integration
- [Vitest](https://vitest.dev/) - Testing framework

---

<p align="center">
  Made with â¤ï¸ by <a href="https://github.com/imabhijitgobe">Abhijit Gobe</a>
</p>
